{% extends "layout.html" %}
{% block content %}
<div style="padding: 20px; font-family: Arial, sans-serif;">
    <h2 style="text-align: center; color: #1a1a1a;">Welcome back, Ismail! Let's find some deals</h2>

    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <h3>+ Add New Product</h3>
        <form method="POST">
            <input type="text" name="name" placeholder="Product Name (e.g., Smart Watch Ultra)" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <input type="number" name="price" placeholder="Price (DH)" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <input type="text" name="image_url" placeholder="Image URL (Link)" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <textarea name="description" placeholder="Product Description (e.g., High quality, available in all colors)" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; height: 80px;"></textarea>
            <input type="text" name="affiliate_link" placeholder="AliExpress Affiliate Link" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <button type="submit" style="width: 100%; padding: 10px; background-color: #e62e04; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Add Product to Store</button>
        </form>
    </div>

    <hr>
    <h3 style="margin-top: 30px;">ðŸ›’ My Listed Products</h3>
    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <thead style="background: #de0000; color: white;">
            <tr>
                <th style="padding: 15px;">Product</th>
                <th style="padding: 15px;">Price</th>
                <th style="padding: 15px;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for p in products %}
            <tr style="border-bottom: 1px solid #eee; text-align: center;">
                <td style="padding: 15px;">{{ p.name }}</td>
                <td style="padding: 15px;">{{ p.price }} DH</td>
                <td style="padding: 15px;">
                   <a href="/delete/{{ p.id }}" style="color: red; text-decoration: none;">
                    <i class="fas fa-trash"></i> Delete
                   </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3 style="margin-top: 30px;">ðŸ“¦ New Orders (Waiting for Contact)</h3>
    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
        <thead style="background: #2c3e50; color: white;">
            <tr>
                <th style="padding: 15px;">Customer</th>
                <th style="padding: 15px;">Product</th>
                <th style="padding: 15px;">Phone Number</th>
                <th style="padding: 15px;">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr style="border-bottom: 1px solid #eee; text-align: center;">
                <td style="padding: 15px;">{{ order.customer_name }}</td>
                <td style="padding: 15px;">{{ order.product_name }}</td>
                <td style="padding: 15px;">{{ order.customer_phone }}</td>
                <td style="padding: 15px;">
                    <a href="/delete_order/{{ order.id }}" style="color: #2e7d32; text-decoration: none; font-weight: bold;">
                        <i class="fas fa-check-circle"></i> Contacted
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 20px; padding: 15px; background: #e6e6e6; border-radius: 10px; text-align: center;">
        <h3 style="color: #2e7d32; margin: 0;">
            <i class="fas fa-chart-line"></i> 
            Total Orders: {{ orders|length }}
        </h3>
    </div>
</div>
{% endblock %}